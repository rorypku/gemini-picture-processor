# Outfit图片处理脚本运行指南

## 功能说明
这个脚本会处理 `Outfit` 文件夹中的所有子文件夹，使用 Google Gemini 2.5 Flash 模型生成模特拍摄图。

## 使用方法

### 1. 确保环境准备就绪
- 确保虚拟环境已激活
- 确保所有依赖包已安装 (openai, python-dotenv, pillow)
- 确保 `.env` 文件中的 API 密钥正确

### 2. 运行脚本
```bash
python process_outfits.py
```

## 脚本功能

### 主要特性
- **自动遍历子文件夹**: 处理 `Outfit` 文件夹下的所有子文件夹
- **批量图片上传**: 将每个子文件夹中的所有图片一次性上传给 LLM
- **智能图片识别**: 支持 jpg, jpeg, png, gif, bmp, webp 格式
- **Base64处理**: 将图片编码为 base64 格式上传，将返回的 base64 图片保存为 PNG
- **详细日志**: 实时显示处理进度和结果
- **错误处理**: 完善的错误处理和报告机制

### 输出文件
处理完成后，在 `Output` 文件夹中会生成：

1. **生成的图片**: `{文件夹名}_{时间戳}_{序号}.png`
2. **处理结果**: `processing_results_{时间戳}.json` (详细的JSON格式结果)
3. **处理报告**: `processing_report_{时间戳}.txt` (简要的文本报告)

### LLM 处理参数
- **模型**: `google/gemini-2.5-flash-image-preview`
- **提示词**: "生成一张模特拍摄图，要求模特穿戴图中的义务和物件，摆出各种姿势"
- **输入**: 每个子文件夹中的所有图片

## 示例

假设你的文件结构是：
```
Outfit/
├── Outfit 1/
│   ├── character.jpg
│   └── outfit 1.jpeg
└── Outfit 2/
    ├── shirt.png
    └── pants.jpg
```

运行脚本后，`Output` 文件夹会包含：
```
Output/
├── Outfit 1_1756474735_1.png
├── Outfit 2_1756474735_1.png
├── processing_results_1756474735.json
└── processing_report_1756474735.txt
```

## 注意事项
- API 调用之间有 2 秒延迟，避免触发速率限制
- 确保网络连接稳定
- 大型图片文件可能需要较长处理时间
- 如果遇到错误，请查看详细的报告文件
